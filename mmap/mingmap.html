<!DOCTYPE html>
<html>

<head>

  <title>Google Maps API version 3 Example</title>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <link rel="stylesheet" href="mingmap.css" />
  <script>

    myLat = 0;
    myLng = 0;
    
    function init(){
       
        console.log("1. In getMyLocation()");
    
        if (navigator.geolocation) { 
        // the navigator.geolocation object is supported on your browser
            navigator.geolocation.getCurrentPosition(function(position) {
                console.log("2. Finally got your location!");
                myLat = position.coords.latitude;
                myLng = position.coords.longitude;
                mymap(myLat, myLng);
                console.log("3. Leaving the function(position)...");
            });
        } 
        else {
            alert("Geolocation is not supported by your web browser. What a shame!");
        }
        console.log("4. Leaving getMyLocation(). Good bye cruel world!");
    }


    function mymap(myLat, myLng){
    // Faneuil Hall
        var landmark = new google.maps.LatLng(myLat, myLng);
    
        // Set up map
        var myOptions = {
            zoom: 13, // The larger the zoom number, the bigger the zoom
            center: landmark,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map in the "map_canvas" <div>
        var map = new google.maps.Map(document.getElementById("map_canvas"), 
            myOptions);

        // Create a marker
        var marker = new google.maps.Marker({
            position: landmark,
            title: "You Are Here"
        });

        marker.setMap(map);
        // This is a global info window...
        var infowindow = new google.maps.InfoWindow();

        // Open info window on click of marker
        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(marker.title);
            infowindow.open(map, marker);
        });
    }
      
</script>

</head>

<body onload="init()">

<div id="map_canvas"></div>

</body>

</html>
